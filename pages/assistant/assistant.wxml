<view class="container">
  <view class="chat-container">
    <scroll-view scroll-y="true" class="chat-list" scroll-into-view="{{scrollToView}}">
      <!-- 欢迎消息 -->
      <view class="message assistant">
        <view class="message-content">
        </view>
      </view>
      
      <!-- 聊天历史 -->
      <block wx:for="{{chatHistory}}" wx:key="index">
        <view class="message {{item.role === 'user' ? 'user' : 'assistant'}}" id="msg-{{index}}">
          <view class="message-content">
            {{item.content}}
          </view>
        </view>
      </block>
      
      <!-- 加载指示器 -->
      <view class="message assistant" wx:if="{{loading}}">
        <view class="message-content loading">
          <view class="loading-dot"></view>
          <view class="loading-dot"></view>
          <view class="loading-dot"></view>
        </view>
      </view>
      
      <!-- 底部占位，确保滚动效果更好 -->
      <view style="height: 20rpx;"></view>
    </scroll-view>
  </view>
  
  <view class="input-container">
    <input class="input" bindinput="onInput" value="{{inputValue}}" placeholder="请输入您的问题" confirm-type="send" bindconfirm="sendMessage" />
    <button class="send-button" bindtap="sendMessage" disabled="{{loading}}">发送</button>
  </view>
</view> 